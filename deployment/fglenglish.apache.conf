<VirtualHost *:80>
    ServerName www.fgl.dev.br

    # Logs
    ErrorLog ${APACHE_LOG_DIR}/fglenglish_error.log
    CustomLog ${APACHE_LOG_DIR}/fglenglish_access.log combined

    # Basic Authentication
    <Location />
        AuthType Basic
        AuthName "Restricted Access"
        AuthUserFile /etc/apache2/.htpasswd
        Require valid-user
    </Location>

    # Proxy to Gunicorn
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:5002/
    ProxyPassReverse / http://127.0.0.1:5002/

    # Static Files Configuration
    # We need to explicitly allow access and apply auth to these directories if Aliased
    
    Alias /static /home/fleal/fgl_projects/fglenglishapp/web_app/static
    <Directory /home/fleal/fgl_projects/fglenglishapp/web_app/static>
        Options -Indexes +FollowSymLinks
        AllowOverride None
        AuthType Basic
        AuthName "Restricted Access"
        AuthUserFile /etc/apache2/.htpasswd
        Require valid-user
    </Directory>

    Alias /audios_user /home/fleal/fgl_projects/fglenglishapp/Oxford_list/audios_user
    <Directory /home/fleal/fgl_projects/fglenglishapp/Oxford_list/audios_user>
        Options -Indexes +FollowSymLinks
        AllowOverride None
        AuthType Basic
        AuthName "Restricted Access"
        AuthUserFile /etc/apache2/.htpasswd
        Require valid-user
    </Directory>

    Alias /audios /home/fleal/fgl_projects/fglenglishapp/Oxford_list/audios
    <Directory /home/fleal/fgl_projects/fglenglishapp/Oxford_list/audios>
        Options -Indexes +FollowSymLinks
        AllowOverride None
        AuthType Basic
        AuthName "Restricted Access"
        AuthUserFile /etc/apache2/.htpasswd
        Require valid-user
    </Directory>

    Alias /audios_book /home/fleal/fgl_projects/fglenglishapp/pitch_anything/audio_book
    <Directory /home/fleal/fgl_projects/fglenglishapp/pitch_anything/audio_book>
        Options -Indexes +FollowSymLinks
        AllowOverride None
        AuthType Basic
        AuthName "Restricted Access"
        AuthUserFile /etc/apache2/.htpasswd
        Require valid-user
    </Directory>
</VirtualHost>
